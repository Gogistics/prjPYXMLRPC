@version:3.19

#
# Options
#

options {
    use_dns(no);
    use_fqdn (no);
    keep_hostname(yes);
    create_dirs(yes);
    ts_format(iso);
    time_reopen (10);
    chain_hostnames (no);
};


#
# Sources
#

source s_net {
    tcp(      
     ip("0.0.0.0")     
    );                 
    udp(                            
     ip("0.0.0.0")                  
    );                            
    syslog(                         
     ip("0.0.0.0")                                     
    );                                                 
    unix-stream("/var/run/syslog-ng/syslog-ng.sock");
};                                                
source s_sys {                      
    # Standard system log source.                      
    system();                                          
                                    
    # Messages generated by syslog-ng.                 
    internal();                                        
};    


#
# Destinations
#

destination d_mongodb {
    mongodb(
        servers("172.99.0.12:27017")
        database("control_system")
        collection("syslog")
        value-pairs(
            scope("selected-macros" "nv-pairs" "sdata")
        )
    );
};


#
# Logs
#

log {
    source(s_net);
    destination(d_mongodb);
};

log {
    source(s_sys);
    destination(d_mongodb);
};